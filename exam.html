<!-------------------------------------------------------
    Final Exam
    Written by: Amer Al Jawabra 2205182
    For “Internet Programming” Section 1 – Fall 2023
-------------------------------------------------------->
<!DOCTYPE html>
<html lang="en">

<head>
    <title>Final Exam</title>
    <link rel="stylesheet" href="style.css" type="text/css">
    <meta charset="utf-8">
</head>

<body>
    <header>
        <h1>Final Exam</h1>
    </header>
    <div class="mid">
        <form>
            <!-- Adding all the labels and inputs necessary for the calculator -->
            <div class="radioDiv">
                <div class="inputGroup">
                    <input onclick="handleCalculateCheck()" type="radio" name="licensingOptions" id="yearlyLicense"
                        value="yearlyLicense" required />
                    <label class="radioLabel" for="yearlyLicense">Yearly License</label>
                </div>
                <div class="inputGroup">
                    <input onclick="handleCalculateCheck()" type="checkbox" name="optionalFeatures"
                        id="level3TechnicalSupport" value="Level3TechnicalSupport" required />
                    <label class="radioLabel" for="level3TechnicalSupport">level-3 Technical Support</label>
                </div>
                <div class="inputGroup">
                    <input onclick="handleCalculateCheck()" type="radio" name="licensingOptions" id="oneTimePurchase"
                        value="OneTimePurchase" required />
                    <label class="radioLabel" for="oneTimePurchase">One-Time Purchase</label>
                </div>
                <div class="inputGroup">
                    <input onclick="handleCalculateCheck()" type="checkbox" name="optionalFeatures" id="onSiteTraining"
                        value="OnSiteTraining" required />
                    <label class="radioLabel" for="onSiteTraining">On-Site Training</label>
                </div>
                <div class="inputGroup">
                </div>
                <div class="inputGroup">
                    <input onclick="handleCalculateCheck()" type="checkbox" name="optionalFeatures" id="cloudBackup"
                        value="CloudBackup" required />
                    <label class="radioLabel" for="cloudBackup">Cloud Backup</label>
                </div>
            </div>
            <br><br>
            <!-- Separated input radios with divs to make the page more responsive -->
            <div class="inputDiv">
                <div class="inputBorder">
                    <label for="softwareCost">Cost of Software Licensing: </label>
                    <input type="text" id="softwareCost" readonly /> <br>
                    <br>
                    <label for="optionalCost">Cost of Optional Features: </label>
                    <input type="text" id="optionalCost" readonly />
                </div>
                <br>
                <button type="button" onclick="handleCalculateClick()" id="btn">Caculate</button>
                <div class="text">
                    <label for="totalPrice">Total Cost: </label>
                    <input type="text" id="totalPrice" readonly />
                </div>
            </div>
        </form>
        <table border="2">
            <thead>
                <tr>
                    <th>Option</th>
                    <th>Price</th>
                </tr>
            </thead>
            <tbody id="tableBody"></tbody>
        </table>
        <script>
            const jsonFilePath = 'exam.json';

            // fetch json path
            fetch(jsonFilePath)
                .then(response => {
                    // check if response is working
                    if (!response.ok) {
                        throw new Error(`Network response was not ok: ${response.status}`);
                    }
                    return response.json();
                })
                .then(data => {
                    // store json data into a table
                    const tableBody = document.getElementById('tableBody');

                    data.forEach(item => {
                        const row = tableBody.insertRow();
                        const cell1 = row.insertCell(0);
                        const cell2 = row.insertCell(1);

                        cell1.textContent = item.option;
                        cell2.textContent = item.price;
                    });
                })
                .catch(error => {
                    console.error('Error fetching JSON:', error);
                });

            // initialize variables
            let cost = 0;
            let softwareCost = 0;
            let optionalCost = 0;

            function handleCalculateCheck() {
                // handle checked boxes
                if (document.getElementById("yearlyLicense").checked) {
                    softwareCost += 5000;
                }
                if (document.getElementById("oneTimePurchase").checked) {
                    softwareCost += 20000;
                }
                if (document.getElementById("level3TechnicalSupport").checked) {
                    optionalCost += 3500;
                }
                if (document.getElementById("onSiteTraining").checked) {
                    optionalCost += 2000;
                }
                if (document.getElementById("cloudBackup").checked) {
                    optionalCost += 300;
                }

                // assign cost to corresponding element
                document.getElementById("softwareCost").value = softwareCost;
                document.getElementById("optionalCost").value = optionalCost;

                cost = softwareCost + optionalCost;
                // reset variables
                softwareCost = 0;
                optionalCost = 0;
            }

            function handleCalculateClick() {
                document.getElementById("totalPrice").value = cost;
                softwareCost = 0;
                optionalCost = 0;
            }
        </script>
</body>

</html>
